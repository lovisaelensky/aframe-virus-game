<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEVEL-2</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.7.1/aframe.min.js"></script>
    <script src="https://codechangers.com/physics.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script
        src="https://unpkg.com/aframe-fps-look-controls-component/dist/aframe-fps-look-controls-component.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>


<body>

    <!-- MODAL -->
    <div class="modal-intro-two bg-active">
        <div class="modal">
            <h1>GREAT JOB!</h1>
            <p>But when you walked towards the door to get the food your flatmate sneezed. Watch out for the virus!
                <br><br>
                - Press the space bar -
            </p>
            <button class="close-btn">NEXT</button>
        </div>
    </div>

    <a-scene id="myScene" fog="type: linear; color: #000; far: 10; near: 7"
        inspector="https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">

        <a-assets>
            <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg">
            <img id="white-wall" src="assets/white-wall.jpg">
            <a-asset-item id="virus" src="assets/virus.glb"></a-asset-item>
            <a-asset-item id="coronaSound" src="assets/coronavirus.mp3" response-type="arraybuffer"></a-asset-item>
            <a-asset-item id="door" src="assets/door.glb"></a-asset-item>
            <a-asset-item id="navmesh" src="assets/navmesh2.gltf"></a-asset-item>
            <a-asset-item id="table" src="assets/table.glb"></a-asset-item>
            <a-asset-item id="boombox" src="assets/boombox.glb"></a-asset-item>
            <a-asset-item id="food" src="assets/food.glb"></a-asset-item>
            <audio id="bg-music" src="/assets/i-have-sinned-creepy-mysterious-free-music-2466.mp3"
                preload="auto"></audio>
        </a-assets>

        <a-entity id="collisionSound" sound="src: #coronaSound; poolSize: 15" position="0 1.6 0"></a-entity>

        <!-- CAMERA, CURSOR & MOVEMENT CONTROLS -->
        <a-entity movement-controls="speed: 0; ">
            <a-entity id="myCamera" camera position="-2 1.6 3" fps-look-controls="userHeight: 0">
                <a-cursor intersection-spawn="event: click; mixin: voxel" material="color: red"></a-cursor>
            </a-entity>
        </a-entity>

        <!-- GROUND -->
        <a-plane src="#groundTexture" rotation="-90 0 0" width="30" height="30" position="1.013 0 2.808"
            scale="0.76 1.1400000000000001 1"></a-plane>


        <!-- NAVIGATION MESH -->
        <!-- <a-entity gltf-model="#navmesh" nav-mesh position="0 -0.1 0" visible="false"></a-entity> -->

        <a-sky color="#222"></a-sky>

        <!-- WALLS -->
        <a-box class="wall" id="w0001" position="1 2 -10.5" rotation="" geometry="width: 6; height: 4; depth: 0.1"
            material="src: #white-wall;" scale="3 1 1"></a-box>
        <a-box class="wall" id="w0002" position="-8 2 1.7" rotation="0 -90 0" geometry="width: 7; height: 4; depth: 0.1"
            material="src: #white-wall;" scale="3.5 1 1"></a-box>
        <a-box class="wall" id="w0003" position="5.5 2 10.5" rotation="" geometry="width: 3; height: 4; depth: 0.1"
            material="src: #white-wall;" scale="3 1 1"></a-box>
        <a-box class="wall" id="w0004" position="10 2 0" rotation="0 -90 0" geometry="width: 6; height: 4; depth: 0.1"
            material="src: #white-wall;" scale="3.5 1 1"></a-box>


        <a-box class="wall" id="w0005" position="-3.5 2 14" geometry="depth: 0.1; height: 4; width: 3"
            material="src: #white-wall;" scale="3 1 1"></a-box>
        <a-box class="wall" id="w0006" position="0.96 2 15.7" rotation="0 -90 0" geometry="height:4;depth:0.1"
            material="src: #white-wall;" scale="3.5 1 1"></a-box>
        <a-box class="wall" id="w0007" position="5.556 2 14.003" rotation="0 -90 0"
            geometry="width:2;height:4;depth:0.1" material="src: #white-wall;" scale="3.5 1 1"></a-box>

        <a-box class="wall" id="w0008" position="1.723 2 17.4" geometry="width:0.5;height:4;depth:0.1"
            material="src:#white-wall" scale="3 1 1">
        </a-box>
        <a-box class="wall" id="w0008-2" position="4.774 2 17.4" geometry="depth:0.1;height:4;width:0.5"
            material="src:#white-wall" scale="3 1 1">
        </a-box>
        <a-box class="wall" id="w0008-3" position="3.245 3.679 17.4" geometry="height:0.64;width:0.55;depth:0.1"
            material="src:#white-wall" scale="3 1 1">
        </a-box>
        <a-box class="wall" id="w0009" position="0.969 2 5.3" rotation="0 -90 0" geometry="width:3;height:4;depth:0.1"
            material="src:#white-wall" scale="3.5 1 1"></a-box>
        <a-box class="wall" id="w0010" position="7.805 2 0.1" geometry="width:1.45;depth:0.1;height:4"
            material="src:#white-wall" scale="3 1 1"></a-box>
        <a-box class="wall" id="w0011" position="2.514 2 0.1" geometry="depth:0.1;height:4" material="src:#white-wall"
            scale="3 1 1"></a-box>
        <a-box class="wall" id="w0012" position="4.83 3.679 0.1" geometry="height:0.64;width:0.55;depth:0.1"
            material="src:#white-wall" scale="3 1 1"></a-box>

        <!-- DOOR -->
        <a-entity gltf-model="#door" position="3.83529 1.628 18.19796" scale="1 0.86 0.86" rotation="0 -10 0">
        </a-entity>

        <!-- INTERIOR -->
        <a-entity gltf-model="#table" position="-6 0 13" scale="0.008 0.008 0.008" rotation="-90 0 0"></a-entity>

        <a-entity gltf-model="#boombox" position="-6.9064 1.7 13" scale="0.003 0.003 0.003" rotation="0 150 0"
            sound="src: #bg-music; autoplay: true">
        </a-entity>

        <!-- TARGETS -->
        <a-entity static-body gltf-model="#virus" class="target" position="-5.15 1.5 -4" scale="0.01 0.01 0.01"
            animation__rotation="property: rotation; dir: alternate; dur: 5000; loop: true; easing: linear; to: 0 360 0;"
            animation__position="property: position; delay: 1000; to: -3 4 -6; dur: 2500; easing: linear; loop: true; dir: alternate;">
        </a-entity>

        <a-entity static-body gltf-model="#virus" class="target" position="-3 1.091 -9.697" scale="0.015 0.015 0.015"
            animation__rotation="property: rotation; dir: alternate; dur: 5000; loop: true; easing: linear; to: 0 0 360;"
            animation__position="property: position; delay: 1000; to: 1 2 -4; dur: 3000; easing: linear; loop: true; dir: alternate;"
            animation__scale="property: scale; to: 0.02 0.02 0.02; dur: 1000; easing: linear; loop: true; dir: alternate;">
        </a-entity>

        <a-entity static-body gltf-model="#virus" class="target" position="-1 3 -5" scale="0.015 0.015 0.015"
            animation__rotation="property: rotation; dir: alternate; dur: 5000; loop: true; easing: linear; to: 360 0 0;"
            animation__position="property: position; to: 1 2 -4; dur: 2000; easing: linear; loop: true; dir: alternate;">
        </a-entity>

        <a-entity static-body gltf-model="#virus" class="target" position="-3 2 -5" scale="0.015 0.015 0.015"
            animation__rotation="property: rotation; dir: alternate; dur: 5000; loop: true; easing: linear; to: 360 0 0;"
            animation__position="property: position; delay: 1500; to: -2 3 -3; dur: 1000; easing: linear; loop: true; dir: alternate;"
            animation__scale="property: scale; to: 0.01 0.01 0.01; dur: 2000; easing: linear; loop: true; dir: alternate;">
        </a-entity>

    </a-scene>

</body>
<script src="https://codechangers.com/camps2019/vr/shoot-partial.js"></script>
<script src="scripts/shoot.js"></script>
<script src="scripts/level2.js"></script>
<script>nextLevel = 'level3.html';</script>

</html>